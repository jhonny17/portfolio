name: Check coverage
description: Checks the test coverage

inputs:
  github-token:
    description: 'GitHub token'
    required: true

  aws-access-key-id:
    description: 'AWS Access Key ID'
    required: true

  aws-secret-access-key:
    description: 'AWS Secret Access Key'
    required: true

  aws-default-region:
    description: 'AWS Default Region'
    required: true

runs:
  using: 'composite'
  steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Install dependencies
      uses: jhonny17/portfolio/.github/actions/install-dependencies@main
      with:
        github-token: ${{ inputs.github-token }}

    - name: Check coverage
      shell: bash
      run: pnpm exec vitest --coverage --watch false
